# US-editor-002：编辑器布局（左侧场景资源管理器、下方资源浏览器、右侧属性面板、中间渲染窗口）与拾取/拖入/属性显示

- **标题**：编辑器上有**左侧**的场景资源管理器、**下方**的资源浏览器、**右侧**的属性面板和**中间**的渲染窗口。渲染窗口当中的模型可以**点击拾取**；可从资源管理器**拖入**资源到场景。右侧属性面板可以**显示各种 Component 的属性**。
- **编号**：US-editor-002

---

## 1. 角色/触发

- **角色**：使用编辑器的开发者、美术
- **触发**：需要统一的编辑器布局与交互：**左侧**场景资源管理器、**下方**资源浏览器、**右侧**属性面板、**中间**渲染窗口；在渲染窗口中**点击模型可拾取**（选中对应 Entity）；从资源管理器**拖入**资源（如模型）到场景；在**右侧属性面板**查看与编辑**各种 Component 的属性**。

---

## 2. 端到端流程与约定

1. **布局**：
   - **左侧**：**场景资源管理器**（场景层级、Entity 树）；与 Scene/Entity 对接；选择、拖拽、复制/粘贴；可拖入资源到渲染窗口。
   - **下方**：**资源浏览器**；资源列表、预览、导入、与 Resource 对接；可**从资源管理器拖入**资源到**渲染窗口**或场景。
   - **右侧**：**属性面板**；**可显示各种 Component 的属性**；绑定到当前选中的 Entity 或资源后，按 Component 展示属性并与 Object 反射联动；编辑与撤销。
   - **中间**：**渲染窗口**（3D/2D 视口）；相机、Gizmo、与 Pipeline/RHI 对接。

2. **渲染窗口交互**：
   - **渲染窗口当中的模型可以点击拾取**：用户在渲染窗口中点击模型时，编辑器**拾取**对应 Entity 并设为当前选中；左侧场景资源管理器与右侧属性面板同步选中对象。
   - **从资源管理器拖入**：用户可从**资源浏览器**（或左侧场景资源管理器）**拖入**资源（如模型、预制体）到**渲染窗口**；放置后在场景中创建或关联对应 Entity/资源。

3. **右侧属性面板**：
   - **可显示各种 Component 的属性**：当前选中 Entity 时，属性面板按该 Entity 上的**各 Component** 展示属性（如 TransformComponent、ModelComponent、LightComponent 等）；与 Object 反射/属性系统联动，支持编辑与撤销。

---

## 3. 涉及模块

| 模块 | 职责摘要 |
|------|----------|
| 024-Editor | 布局（左侧场景资源管理器、下方资源浏览器、右侧属性面板、中间渲染窗口）；渲染窗口点击拾取、从资源管理器拖入；右侧属性面板显示各 Component 属性 |
| 004-Scene, 005-Entity | 场景层级、Entity、Component；拾取与选中、拖入放置时创建/关联 Entity |
| 002-Object | 反射、属性；属性面板按 Component 类型展示属性 |
| 013-Resource | 资源浏览器、拖入资源引用 |
| 020-Pipeline, 008-RHI | 渲染窗口渲染、拾取射线/命中检测 |

---

## 4. 每模块职责与 I/O

### 024-Editor

- **职责**：提供**左侧**场景资源管理器（getSceneView）、**下方**资源浏览器（getResourceView）、**右侧**属性面板（getPropertyPanel）、**中间**渲染窗口（getRenderViewport）；**渲染窗口当中的模型可以点击拾取**（PickInViewport 或等价能力，选中 Entity）；**从资源管理器拖入**资源到渲染窗口（DropFromResourceManager 或等价能力）；**右侧属性面板可显示各种 Component 的属性**（BindEntity、按 Component 展示属性，与 Object 反射联动）。
- **输入**：用户点击渲染窗口（拾取）、拖拽资源到渲染窗口（放置）；选中 Entity 后属性面板绑定并展示 Component 属性。
- **输出**：布局与句柄/接口；拾取结果（选中 Entity）；拖入放置结果（创建/关联 Entity）；属性面板展示 Component 属性。

---

## 5. 派生 ABI（与契约/ABI 对齐）

以下与 **specs/_contracts/024-editor-ABI.md** 及 **024-editor-public-api.md** 一致：布局约定（左场景资源管理器、下资源浏览器、右属性面板、中渲染窗口）；IEditor::getSceneView、getResourceView、getPropertyPanel、getRenderViewport；渲染窗口点击拾取、从资源管理器拖入；右侧属性面板显示各种 Component 的属性。

---

## 6. 验收要点

- 编辑器具备**左侧**场景资源管理器、**下方**资源浏览器、**右侧**属性面板、**中间**渲染窗口。
- **渲染窗口当中的模型可以点击拾取**，选中对应 Entity；场景资源管理器与属性面板同步选中。
- 可从**资源管理器**（下方或左侧）**拖入**资源到**渲染窗口**，在场景中创建或关联 Entity。
- **右侧属性面板可以显示各种 Component 的属性**（选中 Entity 后按 Component 展示，与反射联动）。
