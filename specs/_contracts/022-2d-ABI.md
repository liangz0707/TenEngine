# 022-2D 模块 ABI

- **契约**：[022-2d-public-api.md](./022-2d-public-api.md)（能力与类型描述）
- **本文件**：022-2D 对外 ABI 显式表。
- **参考**：Unity 2D（Sprite、Tilemap、SortingLayer）、UE Paper2D；精灵、瓦片地图、2D 相机、Physics2D 桥接。
- **命名**：成员方法采用 **PascalCase**；说明列给出**完整函数签名**。

## ABI 表

列定义：**模块名 | 命名空间 | 类名 | 导出形式 | 接口说明 | 头文件 | 符号 | 说明**

### 精灵（Sprite）

| 模块名 | 命名空间 | 类名 | 导出形式 | 接口说明 | 头文件 | 符号 | 说明 |
|--------|----------|------|----------|----------|--------|------|------|
| 022-2D | TenEngine::twod | ISprite | 抽象接口 | 加载精灵 | TenEngine/2d/Sprite.h | ISprite::Load | `bool Load(char const* pathOrResourceId);` 与 Resource 精灵/图集对接；失败返回 false |
| 022-2D | TenEngine::twod | ISprite | 抽象接口 | 图集与切片 | TenEngine/2d/Sprite.h | ISprite::GetAtlas, GetSlice | `ITextureResource* GetAtlas() const;` `void GetSlice(Rect* out) const;` 图集纹理与 UV 区域 |
| 022-2D | TenEngine::twod | ISprite | 抽象接口 | 排序顺序 | TenEngine/2d/Sprite.h | ISprite::SetSortOrder, GetSortOrder | `void SetSortOrder(int order);` `int GetSortOrder() const;` 与 Pipeline 2D Pass、SortingLayer 协同 |
| 022-2D | TenEngine::twod | ISprite | 抽象接口 | 提交到管线 | TenEngine/2d/Sprite.h | ISprite::SubmitToPipeline | `void SubmitToPipeline(IRenderPipeline* pipeline, Transform const& worldTransform);` 与 Pipeline 2D 绘制对接 |
| 022-2D | TenEngine::twod | — | 自由函数/工厂 | 创建精灵 | TenEngine/2d/Sprite.h | CreateSprite | `ISprite* CreateSprite();` 失败返回 nullptr |

### 瓦片地图（Tilemap）

| 模块名 | 命名空间 | 类名 | 导出形式 | 接口说明 | 头文件 | 符号 | 说明 |
|--------|----------|------|----------|----------|--------|------|------|
| 022-2D | TenEngine::twod | ITilemap | 抽象接口 | 瓦片集 | TenEngine/2d/Tilemap.h | ITilemap::GetTileSet | `ITileSet* GetTileSet() const;` 与 Resource 瓦片集对接 |
| 022-2D | TenEngine::twod | ITilemap | 抽象接口 | 层与绘制 | TenEngine/2d/Tilemap.h | ITilemap::GetLayerCount, GetLayer, Draw | `uint32_t GetLayerCount() const;` `ITilemapLayer* GetLayer(uint32_t index) const;` `void Draw(IRenderPipeline* pipeline);` 与 Pipeline 绘制对接 |
| 022-2D | TenEngine::twod | ITilemap | 抽象接口 | 碰撞层 | TenEngine/2d/Tilemap.h | ITilemap::SetCollisionLayer, GetCollisionLayer | `void SetCollisionLayer(uint32_t layer);` `uint32_t GetCollisionLayer() const;` 与 Physics 2D 对接 |
| 022-2D | TenEngine::twod | — | 自由函数/工厂 | 创建瓦片地图 | TenEngine/2d/Tilemap.h | CreateTilemap | `ITilemap* CreateTilemap(ITileSet* tileSet);` 失败返回 nullptr |

### Physics2D 桥接

| 模块名 | 命名空间 | 类名 | 导出形式 | 接口说明 | 头文件 | 符号 | 说明 |
|--------|----------|------|----------|----------|--------|------|------|
| 022-2D | TenEngine::twod | — | 自由函数/接口 | 创建 2D 刚体 | TenEngine/2d/Physics2D.h | Create2DBody | `IRigidBody* Create2DBody(IPhysicsWorld* world, Transform const& startTransform);` 与 014-Physics 2D 对接；返回 IRigidBody* |
| 022-2D | TenEngine::twod | — | 自由函数/接口 | 创建 2D 碰撞形状 | TenEngine/2d/Physics2D.h | Create2DShape | `IShape* Create2DShape(Box2D const& box);` 或 Create2DShape(Circle2D)、Create2DShape(Polygon2D)；与 Physics 对接 |

### 2D 相机与排序层

| 模块名 | 命名空间 | 类名 | 导出形式 | 接口说明 | 头文件 | 符号 | 说明 |
|--------|----------|------|----------|----------|--------|------|------|
| 022-2D | TenEngine::twod | ICamera2D | 抽象接口 | 2D 相机 | TenEngine/2d/Camera2D.h | ICamera2D | 视口、投影、与 Pipeline 2D Pass、RenderCore 格式对接 |
| 022-2D | TenEngine::twod | — | 枚举/类型 | 排序层 | TenEngine/2d/SortingLayer.h | SortingLayer | 与 Pipeline 2D Pass、SortOrder 协同；由调用方或场景管理 |

*来源：契约能力 Sprite、Tilemap、Physics2D、Rendering2D；参考 Unity 2D、UE Paper2D。*
