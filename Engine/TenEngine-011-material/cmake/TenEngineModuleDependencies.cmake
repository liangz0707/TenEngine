# TenEngine module dependency map (for CMake).
# Matches specs/_contracts/000-module-dependency-map.md.

set(TENENGINE_001_CORE_DEPS "")
set(TENENGINE_002_OBJECT_DEPS "001-core")
set(TENENGINE_003_APPLICATION_DEPS "001-core")
set(TENENGINE_004_SCENE_DEPS "001-core" "002-object")
set(TENENGINE_005_ENTITY_DEPS "001-core" "002-object" "004-scene")
set(TENENGINE_006_INPUT_DEPS "001-core" "003-application")
set(TENENGINE_007_SUBSYSTEMS_DEPS "001-core" "002-object")
set(TENENGINE_008_RHI_DEPS "001-core")
set(TENENGINE_009_RENDERCORE_DEPS "001-core" "008-rhi")
set(TENENGINE_010_SHADER_DEPS "001-core" "008-rhi" "009-rendercore" "013-resource" "002-object")
set(TENENGINE_011_MATERIAL_DEPS "009-rendercore" "010-shader" "013-resource")
set(TENENGINE_012_MESH_DEPS "001-core" "008-rhi" "009-rendercore" "013-resource")
set(TENENGINE_013_RESOURCE_DEPS "001-core" "002-object")
set(TENENGINE_014_PHYSICS_DEPS "001-core" "004-scene" "005-entity")
set(TENENGINE_015_ANIMATION_DEPS "001-core" "002-object" "005-entity")
set(TENENGINE_016_AUDIO_DEPS "001-core" "013-resource")
set(TENENGINE_017_UICORE_DEPS "001-core" "003-application" "006-input")
set(TENENGINE_018_UI_DEPS "017-uicore")
set(TENENGINE_019_PIPELINECORE_DEPS "008-rhi" "009-rendercore")
set(TENENGINE_020_PIPELINE_DEPS "001-core" "004-scene" "005-entity" "019-pipelinecore" "009-rendercore" "010-shader" "011-material" "012-mesh" "013-resource")
set(TENENGINE_021_EFFECTS_DEPS "019-pipelinecore" "009-rendercore" "010-shader" "028-texture")
set(TENENGINE_022_2D_DEPS "001-core" "013-resource" "014-physics" "020-pipeline" "009-rendercore" "028-texture")
set(TENENGINE_023_TERRAIN_DEPS "001-core" "013-resource" "012-mesh" "020-pipeline" "009-rendercore" "028-texture")
set(TENENGINE_024_EDITOR_DEPS "001-core" "003-application" "006-input" "008-rhi" "013-resource" "004-scene" "005-entity" "020-pipeline" "018-ui" "028-texture")
set(TENENGINE_025_TOOLS_DEPS "")
set(TENENGINE_026_NETWORKING_DEPS "001-core" "005-entity")
set(TENENGINE_027_XR_DEPS "001-core" "007-subsystems" "006-input" "020-pipeline")
set(TENENGINE_028_TEXTURE_DEPS "001-core" "002-object" "008-rhi" "009-rendercore" "013-resource")
set(TENENGINE_029_WORLD_DEPS "004-scene" "013-resource" "005-entity")
set(TENENGINE_030_DEVICE_RESOURCE_MANAGER_DEPS "001-core" "008-rhi" "013-resource")

function(tenengine_module_id_to_target mod_id out_var)
  string(REGEX REPLACE "^[0-9]+-" "" name_part "${mod_id}")
  string(REPLACE "-" "_" target_suffix "${name_part}")
  set(${out_var} "te_${target_suffix}" PARENT_SCOPE)
endfunction()

function(tenengine_get_deps mod_id out_list_var)
  string(REPLACE "-" "_" u "${mod_id}")
  string(TOUPPER "${u}" U)
  set(var_name "TENENGINE_${U}_DEPS")
  if(DEFINED ${var_name})
    set(${out_list_var} ${${var_name}} PARENT_SCOPE)
  else()
    set(${out_list_var} "" PARENT_SCOPE)
  endif()
endfunction()
